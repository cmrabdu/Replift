<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover, user-scalable=no" />
    <meta name="theme-color" content="#111113" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <title>RepLift - Suivi Muscu</title>
    <link rel="stylesheet" href="style.css">
  </head>
  <body>
    <!-- SVG Icon Sprite -->
    <svg xmlns="http://www.w3.org/2000/svg" class="svg-sprite" aria-hidden="true">
      <symbol id="i-home" viewBox="0 0 24 24"><path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><path d="M9 22V12h6v10"/></symbol>
      <symbol id="i-bar-chart" viewBox="0 0 24 24"><path d="M18 20V10M12 20V4M6 20v-6"/></symbol>
      <symbol id="i-clipboard" viewBox="0 0 24 24"><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"/><rect x="8" y="2" width="8" height="4" rx="1"/></symbol>
      <symbol id="i-user" viewBox="0 0 24 24"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></symbol>
      <symbol id="i-calendar" viewBox="0 0 24 24"><rect x="3" y="4" width="18" height="18" rx="2"/><path d="M16 2v4M8 2v4M3 10h18"/></symbol>
      <symbol id="i-dumbbell" viewBox="0 0 24 24"><path d="M6.5 12h11"/><rect x="3.5" y="8" width="4" height="8" rx="1"/><rect x="16.5" y="8" width="4" height="8" rx="1"/></symbol>
      <symbol id="i-trending-up" viewBox="0 0 24 24"><path d="m23 6-9.5 9.5-5-5L1 18"/><path d="M17 6h6v6"/></symbol>
      <symbol id="i-award" viewBox="0 0 24 24"><circle cx="12" cy="8" r="6"/><path d="M15.48 13.12 17 22l-5-3-5 3 1.52-8.88"/></symbol>
      <symbol id="i-clock" viewBox="0 0 24 24"><circle cx="12" cy="12" r="10"/><path d="M12 6v6l4 2"/></symbol>
      <symbol id="i-flame" viewBox="0 0 24 24"><path d="M12 2c0 4-6 5.75-6 11a6 6 0 0 0 12 0c0-5.25-6-7-6-11z"/></symbol>
      <symbol id="i-zap" viewBox="0 0 24 24"><path d="M13 2 3 14h9l-1 8 10-12h-9z"/></symbol>
      <symbol id="i-sliders" viewBox="0 0 24 24"><path d="M4 21V14M4 10V3M12 21v-9M12 8V3M20 21v-5M20 12V3M1 14h6M9 8h6M17 16h6"/></symbol>
      <symbol id="i-pencil" viewBox="0 0 24 24"><path d="M17 3a2.83 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5z"/></symbol>
      <symbol id="i-x" viewBox="0 0 24 24"><path d="M18 6 6 18M6 6l12 12"/></symbol>
      <symbol id="i-chevron-down" viewBox="0 0 24 24"><path d="m6 9 6 6 6-6"/></symbol>
      <symbol id="i-plus" viewBox="0 0 24 24"><path d="M12 5v14M5 12h14"/></symbol>
      <symbol id="i-file-text" viewBox="0 0 24 24"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><path d="M14 2v6h6M16 13H8M16 17H8M10 9H8"/></symbol>
      <symbol id="i-chevron-up" viewBox="0 0 24 24"><path d="m18 15-6-6-6 6"/></symbol>
      <symbol id="i-minus" viewBox="0 0 24 24"><path d="M5 12h14"/></symbol>
      <symbol id="i-lock" viewBox="0 0 24 24"><rect x="3" y="11" width="18" height="11" rx="2"/><path d="M7 11V7a5 5 0 0 1 10 0v4"/></symbol>
      <symbol id="i-check" viewBox="0 0 24 24"><path d="M20 6 9 17l-5-5"/></symbol>
    </svg>

    <div class="app">
      <header>
        <span class="header-greeting" id="header-greeting">Bonjour</span>
        <span class="header-brand">RepLift</span>
      </header>

      <!-- ========== Dashboard Page ========== -->
      <div id="dashboard" class="page active">
        <!-- Hero Metrics -->
        <div class="dash-hero">
          <div class="hero-card hero-card--primary">
            <div class="hero-label">Volume ce mois</div>
            <div class="hero-value hero-value--primary" id="stat-volume-month">0 kg</div>
          </div>
          <div class="hero-card hero-card--accent">
            <div class="hero-label">Progression 30j</div>
            <div class="hero-value hero-value--accent" id="stat-progression">-</div>
          </div>
          <div class="hero-card hero-card--warm">
            <div class="hero-label">S√©rie hebdo</div>
            <div class="hero-value hero-value--warm" id="stat-weekly-streak">0</div>
          </div>
        </div>

        <!-- Secondary Stats -->
        <div class="dash-secondary">
          <div class="dash-stat">
            <svg class="icon"><use href="#i-calendar"/></svg>
            <span class="dash-stat-label">S√©ances</span>
            <span class="dash-stat-value" id="stat-month">0</span>
          </div>
          <div class="dash-stat">
            <svg class="icon"><use href="#i-award"/></svg>
            <span class="dash-stat-label">PRs</span>
            <span class="dash-stat-value" id="stat-prs-month">0</span>
          </div>
          <div class="dash-stat">
            <svg class="icon"><use href="#i-clock"/></svg>
            <span class="dash-stat-label">Derni√®re</span>
            <span class="dash-stat-value" id="stat-last-session">-</span>
          </div>
        </div>

        <!-- Activity Calendar -->
        <div class="dash-activity">
          <div class="dash-activity-label">Activit√©</div>
          <div id="heatmap-container" class="heatmap-container"></div>
        </div>
      </div>

      <!-- ========== Stats Page ========== -->
      <div id="stats" class="page">
        <div class="page-title"><span>Statistiques</span></div>
        
        <!-- M√©triques Strat√©giques -->
        <div class="stats-section">
          <h3 class="section-title">M√©triques Strat√©giques</h3>
          <div class="stats-grid">
            <div class="stat-card dark-1">
              <div class="stat-card-icon"><svg class="icon"><use href="#i-dumbbell"/></svg></div>
              <div class="stat-card-label">Volume Total</div>
              <div class="stat-card-value" id="stat-total-volume">0 kg</div>
            </div>
            <div class="stat-card dark-2">
              <div class="stat-card-icon"><svg class="icon"><use href="#i-zap"/></svg></div>
              <div class="stat-card-label">Intensit√© Moy.</div>
              <div class="stat-card-value" id="stat-avg-intensity">0 kg/rep</div>
            </div>
            <div class="stat-card dark-3">
              <div class="stat-card-icon"><svg class="icon"><use href="#i-sliders"/></svg></div>
              <div class="stat-card-label">√âquilibrage</div>
              <div class="stat-card-value" id="stat-muscle-balance">-</div>
            </div>
            <div class="stat-card dark-4">
              <div class="stat-card-icon"><svg class="icon"><use href="#i-trending-up"/></svg></div>
              <div class="stat-card-label">Prog. Mensuelle</div>
              <div class="stat-card-value" id="stat-progression-rate">0%</div>
            </div>
          </div>
        </div>

        <!-- Records & Achievements -->
        <div class="stats-section">
          <h3 class="section-title">Records Personnels</h3>
          <div id="personal-records" class="records-list"></div>
        </div>

        <!-- Tendances -->
        <div class="stats-section">
          <h3 class="section-title">Tendances</h3>
          <div class="comparison-grid">
            <div class="comparison-card">
              <div class="comparison-period">Cette semaine</div>
              <div class="comparison-value" id="week-sessions">0 s√©ances</div>
              <div class="comparison-change" id="week-change">+0 vs sem. derni√®re</div>
            </div>
            <div class="comparison-card">
              <div class="comparison-period">Ce mois</div>
              <div class="comparison-value" id="month-volume">0 kg</div>
              <div class="comparison-change" id="month-change">+0% vs mois dernier</div>
            </div>
          </div>
        </div>

        <!-- √âvolution par Exercice -->
        <div class="stats-section">
          <h3 class="section-title">√âvolution par Exercice</h3>
          <div id="exercise-evolution" class="evolution-list"></div>
        </div>

        <!-- Derniers Succ√®s -->
        <div class="stats-section" id="recent-achievements-section" style="display: none;">
          <h3 class="section-title">Derniers Succ√®s</h3>
          <div id="recent-achievements" class="badges-grid"></div>
        </div>
      </div>

      <!-- ========== Seance / Programmes Page ========== -->
      <div id="seance" class="page">
        <div class="page-title"><span>Entra√Ænement</span></div>
        
        <!-- Tabs -->
        <div class="tabs">
          <button class="tab-btn active" onclick="AppUI.switchSeanceTab(event, 'programmes')">Programmes</button>
          <button class="tab-btn" onclick="AppUI.switchSeanceTab(event, 'historique')">Historique</button>
        </div>
        
        <!-- Tab: Programmes -->
        <div id="tab-programmes" class="tab-content active">
          <div class="tab-header">
            <button class="page-title-btn" onclick="AppUI.openCreateProgram()">+ Nouveau</button>
          </div>
          <div id="programs-list"></div>
        </div>
        
        <!-- Tab: Historique -->
        <div id="tab-historique" class="tab-content">
          <div id="historique-list"></div>
        </div>
      </div>

      <!-- ========== Profil Page ========== -->
      <div id="profil" class="page">
        <div class="page-title"><span>Profil</span></div>

        <!-- En-t√™te Profil + R√©sum√© Rapide -->
        <div class="profile-header" onclick="AppUI.openEditProfile()">
          <div class="profile-avatar" id="profile-avatar">üèãÔ∏è</div>
          <div class="profile-info">
            <div class="profile-name" id="profile-name">Mon Profil</div>
            <div class="profile-tagline" id="profile-tagline">Pr√™t √† en d√©coudre</div>
            <div class="profile-rank" id="profile-rank"></div>
          </div>
          <div class="profile-edit-hint"><svg class="icon icon--sm"><use href="#i-pencil"/></svg></div>
        </div>

        <div class="profile-summary" id="profile-summary">
          <div class="profile-stat">
            <span class="profile-stat-value" id="prof-sessions">0</span>
            <span class="profile-stat-label">S√©ances</span>
          </div>
          <div class="profile-stat">
            <span class="profile-stat-value" id="prof-volume">0t</span>
            <span class="profile-stat-label">Soulev√©</span>
          </div>
          <div class="profile-stat">
            <span class="profile-stat-value" id="prof-streak">0</span>
            <span class="profile-stat-label">Streak (sem.)</span>
          </div>
          <div class="profile-stat">
            <span class="profile-stat-value" id="prof-prs">0</span>
            <span class="profile-stat-label">Records</span>
          </div>
        </div>

        <!-- Achievements (aper√ßu compact) -->
        <div class="settings-group">
          <div class="profile-section-header">
            <h3>Succ√®s</h3>
            <span class="profile-badge-count" id="achievements-count">0/18</span>
          </div>
          <div id="profile-achievements-preview" class="profile-achievements-preview"></div>
          <button class="btn profile-see-all-btn" onclick="AppUI.openAllAchievements()">Voir tous les succ√®s</button>
        </div>

        <!-- √âvolution 12 mois -->
        <div class="settings-group">
          <h3>√âvolution</h3>
          <div id="profile-evolution" class="profile-evolution"></div>
        </div>

        <!-- Param√®tres & Donn√©es -->
        <div class="settings-group">
          <h3>Donn√©es</h3>
          <button class="btn" onclick="AppUI.exportData()">Exporter donn√©es</button>
          <button class="btn" onclick="AppUI.importData()">Importer donn√©es</button>
        </div>
        <div class="settings-group">
          <h3>D√©veloppement</h3>
          <button class="btn" onclick="AppUI.generateTestData()">G√©n√©rer donn√©es de test</button>
        </div>
        <div class="settings-group">
          <h3>Zone Danger</h3>
          <button class="btn btn-danger" onclick="AppUI.resetData()">R√©initialiser toutes les donn√©es</button>
        </div>
        <div class="app-footer">
          <p>Made with ‚ù§Ô∏è by Abdullah Cammur</p>
          <p class="app-version" id="app-version"></p>
        </div>
      </div>

      <!-- ========== Bottom Navigation ========== -->
      <div class="navbar">
        <div class="nav-item active" onclick="AppUI.switchPage(event, 'dashboard')">
          <div class="nav-item-icon"><svg class="icon"><use href="#i-home"/></svg></div>
          <div class="nav-item-label">Dashboard</div>
        </div>
        <div class="nav-item" onclick="AppUI.switchPage(event, 'stats')">
          <div class="nav-item-icon"><svg class="icon"><use href="#i-bar-chart"/></svg></div>
          <div class="nav-item-label">Stats</div>
        </div>
        <div class="nav-fab">
          <button id="fab-button" onclick="AppUI.handleFabClick()">
            <span class="fab-icon"><svg class="icon"><use href="#i-plus"/></svg></span>
            <span id="fab-badge" class="fab-badge" style="display: none;"></span>
          </button>
        </div>
        <div class="nav-item" onclick="AppUI.switchPage(event, 'seance')">
          <div class="nav-item-icon"><svg class="icon"><use href="#i-clipboard"/></svg></div>
          <div class="nav-item-label">S√©ances</div>
        </div>
        <div class="nav-item" onclick="AppUI.switchPage(event, 'profil')">
          <div class="nav-item-icon"><svg class="icon"><use href="#i-user"/></svg></div>
          <div class="nav-item-label">Profil</div>
        </div>
      </div>
    </div>

    <!-- Sheet backdrop (for bottom-sheet overlays) -->
    <div id="overlay-backdrop" class="overlay-backdrop"></div>

    <!-- ========== OVERLAY: Creer un programme ========== -->
    <div id="overlay-create-program" class="overlay">
      <div class="overlay-header">
        <h2 id="create-program-title">Nouveau Programme</h2>
        <button class="overlay-close" onclick="AppUI.closeOverlay('overlay-create-program')"><svg class="icon"><use href="#i-x"/></svg></button>
      </div>
      <div class="overlay-content">
        <div class="form-group">
          <label class="form-label">Nom du programme</label>
          <input type="text" class="form-input" id="program-name" placeholder="Ex: Push, Pull, Leg Day...">
        </div>
        <div id="program-exercises"></div>
        <button class="add-link" onclick="AppUI.addExerciseToForm()">+ Ajouter un exercice</button>
        <div class="form-actions">
          <button class="btn btn-white" onclick="AppUI.saveProgram()">Sauvegarder</button>
          <button class="btn btn-primary" id="btn-duplicate-program" style="display:none;" onclick="AppUI.duplicateCurrentProgram()">Dupliquer</button>
          <button class="btn btn-danger" id="btn-delete-program" style="display:none;" onclick="AppUI.deleteCurrentProgram()">Supprimer ce programme</button>
          <button class="btn btn-danger btn-danger--secondary" id="btn-delete-program-sessions" style="display:none;" onclick="AppUI.deleteCurrentProgramWithSessions()">Supprimer avec ses s√©ances</button>
        </div>
      </div>
    </div>

    <!-- ========== OVERLAY: Recovery session ========== -->
    <div id="overlay-recovery" class="overlay overlay--sheet">
      <div class="overlay-header">
        <h2>Seance interrompue</h2>
        <button class="overlay-close" onclick="AppUI.discardRecovery()"><svg class="icon"><use href="#i-x"/></svg></button>
      </div>
      <div class="overlay-content">
        <div class="recovery-card">
          <div class="recovery-icon"><svg class="icon"><use href="#i-dumbbell"/></svg></div>
          <div class="recovery-info">
            <div class="recovery-program" id="recovery-program-name">-</div>
            <div class="recovery-meta">
              <span class="recovery-duration-badge" id="recovery-duration">-</span>
              <span class="recovery-details" id="recovery-details">-</span>
            </div>
          </div>
        </div>
        <p class="recovery-description">Une seance en cours a ete detectee. Souhaites-tu la reprendre la ou tu t'es arrete ?</p>
        <div class="recovery-actions">
          <button class="btn btn-white" onclick="AppUI.resumeFromRecovery()">Reprendre la seance</button>
          <button class="btn btn-ghost" onclick="AppUI.discardRecovery()">Abandonner</button>
        </div>
      </div>
    </div>

    <!-- ========== OVERLAY: Selectionner programme (bouton +) ========== -->
    <div id="overlay-select-program" class="overlay overlay--sheet">
      <div class="overlay-header">
        <h2>Demarrer une seance</h2>
        <button class="overlay-close" onclick="AppUI.closeOverlay('overlay-select-program')"><svg class="icon"><use href="#i-x"/></svg></button>
      </div>
      <div class="overlay-content">
        <p class="text-muted mb-20">Choisis un programme pour commencer ta seance</p>
        <div id="program-select-list" class="program-grid"></div>
      </div>
    </div>

    <!-- ========== OVERLAY: Session active ========== -->
    <div id="overlay-active-session" class="overlay">
      <div class="overlay-header">
        <h2 id="active-session-title">Seance en cours</h2>
        <button class="overlay-minimize" onclick="AppUI.minimizeSession()" title="Minimiser"><svg class="icon"><use href="#i-chevron-down"/></svg></button>
        <button class="overlay-close" onclick="AppUI.confirmCloseSession()"><svg class="icon"><use href="#i-x"/></svg></button>
      </div>
      <div class="overlay-content">
        <div class="session-timer" id="session-timer">
          <div class="session-timer-value" id="session-timer-value">00:00</div>
          <div class="session-timer-label">Dur√©e</div>
        </div>
        <div id="active-session-exercises"></div>
        <div class="form-actions">
          <button class="btn btn-white" onclick="AppUI.saveSession()">Terminer la seance</button>
        </div>
      </div>
    </div>

    <!-- ========== OVERLAY: Detail d'une seance ========== -->
    <div id="overlay-session-detail" class="overlay">
      <div class="overlay-header">
        <h2 id="session-detail-title">Detail Seance</h2>
        <button class="overlay-close" onclick="AppUI.closeOverlay('overlay-session-detail')"><svg class="icon"><use href="#i-x"/></svg></button>
      </div>
      <div class="overlay-content">
        <div id="session-detail-content"></div>
        <div class="form-actions">
          <button class="btn btn-danger" onclick="AppUI.deleteCurrentSession()">Supprimer cette seance</button>
        </div>
      </div>
    </div>

    <!-- ========== OVERLAY: Tous les achievements ========== -->
    <div id="overlay-all-achievements" class="overlay">
      <div class="overlay-header">
        <h2>Tous les Succ√®s</h2>
        <button class="overlay-close" onclick="AppUI.closeOverlay('overlay-all-achievements')"><svg class="icon"><use href="#i-x"/></svg></button>
      </div>
      <div class="overlay-content">
        <div class="achievements-progress-bar">
          <div class="achievements-progress-fill" id="achievements-progress-fill"></div>
        </div>
        <p class="achievements-progress-text" id="achievements-progress-text">0/18 d√©bloqu√©s</p>
        <div id="all-achievements-list" class="all-achievements-list"></div>
      </div>
    </div>

    <!-- ========== OVERLAY: Modifier le profil ========== -->
    <div id="overlay-edit-profile" class="overlay">
      <div class="overlay-header">
        <h2>Modifier le Profil</h2>
        <button class="overlay-close" onclick="AppUI.closeOverlay('overlay-edit-profile')"><svg class="icon"><use href="#i-x"/></svg></button>
      </div>
      <div class="overlay-content">
        <div class="edit-profile-emoji-section">
          <div class="edit-profile-emoji-preview" id="edit-profile-emoji-preview">üèãÔ∏è</div>
          <div class="edit-profile-emoji-grid" id="edit-profile-emoji-grid"></div>
        </div>
        <div class="form-group">
          <label class="form-label">Nom</label>
          <input type="text" id="edit-profile-name" class="form-input" placeholder="Ton nom" maxlength="30">
        </div>
        <div class="form-group">
          <label class="form-label">Bio</label>
          <input type="text" id="edit-profile-bio" class="form-input" placeholder="D√©cris ton objectif" maxlength="60">
        </div>
        <button class="btn btn-white" onclick="AppUI.saveProfile()">Enregistrer</button>
      </div>
    </div>

    <!-- ========== OVERLAY: Graphique exercice ========== -->
    <div id="overlay-exercise-chart" class="overlay">
      <div class="overlay-header">
        <h2 id="chart-exercise-title">√âvolution</h2>
        <button class="overlay-close" onclick="AppUI.closeOverlay('overlay-exercise-chart')"><svg class="icon"><use href="#i-x"/></svg></button>
      </div>
      <div class="overlay-content">
        <!-- S√©lecteur de p√©riode -->
        <div class="chart-controls">
          <div class="period-selector">
            <button class="period-btn" data-period="7d" onclick="AppUI.switchChartPeriod(event, '7d')">7j</button>
            <button class="period-btn active" data-period="30d" onclick="AppUI.switchChartPeriod(event, '30d')">30j</button>
            <button class="period-btn" data-period="3m" onclick="AppUI.switchChartPeriod(event, '3m')">3M</button>
            <button class="period-btn" data-period="6m" onclick="AppUI.switchChartPeriod(event, '6m')">6M</button>
            <button class="period-btn" data-period="1y" onclick="AppUI.switchChartPeriod(event, '1y')">1A</button>
          </div>
        </div>
        
        <!-- Chart Canvas -->
        <div class="chart-container">
          <canvas id="exercise-chart" width="560" height="300"></canvas>
        </div>
        
        <!-- Stats du graphique -->
        <div class="chart-stats">
          <div class="chart-stat">
            <span class="chart-stat-label">Progression</span>
            <span class="chart-stat-value" id="chart-progression">+0%</span>
          </div>
          <div class="chart-stat">
            <span class="chart-stat-label">Meilleure session</span>
            <span class="chart-stat-value" id="chart-best-session">-</span>
          </div>
          <div class="chart-stat">
            <span class="chart-stat-label">Derni√®re session</span>
            <span class="chart-stat-value" id="chart-last-session">-</span>
          </div>
        </div>
      </div>
    </div>

    <!-- Toast notification -->
    <div class="toast" id="app-toast"></div>

    <!-- Chart tooltip -->
    <div class="chart-tooltip" id="chart-tooltip" style="display:none"></div>

    <script src="app.js"></script>
  </body>
</html>
