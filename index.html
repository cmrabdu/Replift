<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover, user-scalable=no" />
    <meta name="theme-color" content="#0f0f0f" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <title>RepLift - Suivi Muscu</title>
    <link rel="stylesheet" href="style.css">
  </head>
  <body>
    <div class="app">
      <header>
        <span class="header-greeting" id="header-greeting">Bonjour</span>
        <span class="header-brand">RepLift</span>
      </header>

      <!-- ========== Dashboard Page ========== -->
      <div id="dashboard" class="page active">
        <div class="stats-grid">
          <div class="stat-card dark-1">
            <div class="stat-card-icon">üìÖ</div>
            <div class="stat-card-label">S√©ances ce mois</div>
            <div class="stat-card-value" id="stat-month">0</div>
          </div>
          <div class="stat-card dark-2">
            <div class="stat-card-icon">üí™</div>
            <div class="stat-card-label">Volume ce mois</div>
            <div class="stat-card-value" id="stat-volume-month">0 kg</div>
          </div>
          <div class="stat-card dark-3">
            <div class="stat-card-icon">üìà</div>
            <div class="stat-card-label">Progression 30j</div>
            <div class="stat-card-value" id="stat-progression">-</div>
          </div>
          <div class="stat-card dark-4">
            <div class="stat-card-icon">üèÜ</div>
            <div class="stat-card-label">PRs ce mois</div>
            <div class="stat-card-value" id="stat-prs-month">0</div>
          </div>
          <div class="stat-card dark-5">
            <div class="stat-card-icon">‚è±Ô∏è</div>
            <div class="stat-card-label">Derni√®re s√©ance</div>
            <div class="stat-card-value" id="stat-last-session">-</div>
          </div>
          <div class="stat-card dark-6">
            <div class="stat-card-icon">üî•</div>
            <div class="stat-card-label">S√©rie hebdo</div>
            <div class="stat-card-value" id="stat-weekly-streak">0</div>
          </div>
          <div class="stat-card large dark-1">
            <div class="stat-card-label" style="margin-bottom:8px;font-size:var(--font-sm);text-transform:uppercase;letter-spacing:0.5px">Activit√©</div>
            <div id="heatmap-container" class="heatmap-container"></div>
          </div>
        </div>
      </div>

      <!-- ========== Stats Page ========== -->
      <div id="stats" class="page">
        <div class="page-title"><span>Statistiques</span></div>
        
        <!-- M√©triques Strat√©giques -->
        <div class="stats-section">
          <h3 class="section-title">üìä M√©triques Strat√©giques</h3>
          <div class="stats-grid">
            <div class="stat-card dark-1">
              <div class="stat-card-icon">üí™</div>
              <div class="stat-card-label">Volume Total</div>
              <div class="stat-card-value" id="stat-total-volume">0 kg</div>
            </div>
            <div class="stat-card dark-2">
              <div class="stat-card-icon">‚ö°</div>
              <div class="stat-card-label">Intensit√© Moy.</div>
              <div class="stat-card-value" id="stat-avg-intensity">0 kg/rep</div>
            </div>
            <div class="stat-card dark-3">
              <div class="stat-card-icon">‚öñÔ∏è</div>
              <div class="stat-card-label">√âquilibrage</div>
              <div class="stat-card-value" id="stat-muscle-balance">-</div>
            </div>
            <div class="stat-card dark-4">
              <div class="stat-card-icon">üìà</div>
              <div class="stat-card-label">Prog. Mensuelle</div>
              <div class="stat-card-value" id="stat-progression-rate">0%</div>
            </div>
          </div>
        </div>

        <!-- Records & Achievements -->
        <div class="stats-section">
          <h3 class="section-title">üèÜ Records Personnels</h3>
          <div id="personal-records" class="records-list"></div>
        </div>

        <!-- Tendances -->
        <div class="stats-section">
          <h3 class="section-title">üìà Tendances</h3>
          <div class="comparison-grid">
            <div class="comparison-card">
              <div class="comparison-period">Cette semaine</div>
              <div class="comparison-value" id="week-sessions">0 s√©ances</div>
              <div class="comparison-change" id="week-change">+0 vs sem. derni√®re</div>
            </div>
            <div class="comparison-card">
              <div class="comparison-period">Ce mois</div>
              <div class="comparison-value" id="month-volume">0 kg</div>
              <div class="comparison-change" id="month-change">+0% vs mois dernier</div>
            </div>
          </div>
        </div>

        <!-- √âvolution par Exercice -->
        <div class="stats-section">
          <h3 class="section-title">üìä √âvolution par Exercice</h3>
          <div id="exercise-evolution" class="evolution-list"></div>
        </div>

        <!-- Derniers Succ√®s -->
        <div class="stats-section" id="recent-achievements-section" style="display: none;">
          <h3 class="section-title">üéñÔ∏è Derniers Succ√®s</h3>
          <div id="recent-achievements" class="badges-grid"></div>
        </div>
      </div>

      <!-- ========== Seance / Programmes Page ========== -->
      <div id="seance" class="page">
        <div class="page-title"><span>Entra√Ænement</span></div>
        
        <!-- Tabs -->
        <div class="tabs">
          <button class="tab-btn active" onclick="AppUI.switchSeanceTab(event, 'programmes')">Programmes</button>
          <button class="tab-btn" onclick="AppUI.switchSeanceTab(event, 'historique')">Historique</button>
        </div>
        
        <!-- Tab: Programmes -->
        <div id="tab-programmes" class="tab-content active">
          <div class="tab-header">
            <button class="page-title-btn" onclick="AppUI.openCreateProgram()">+ Nouveau</button>
          </div>
          <div id="programs-list"></div>
        </div>
        
        <!-- Tab: Historique -->
        <div id="tab-historique" class="tab-content">
          <div id="historique-list"></div>
        </div>
      </div>

      <!-- ========== Profil Page ========== -->
      <div id="profil" class="page">
        <div class="page-title"><span>Profil</span></div>

        <!-- En-t√™te Profil + R√©sum√© Rapide -->
        <div class="profile-header" onclick="AppUI.openEditProfile()">
          <div class="profile-avatar" id="profile-avatar">üèãÔ∏è</div>
          <div class="profile-info">
            <div class="profile-name" id="profile-name">Mon Profil</div>
            <div class="profile-tagline" id="profile-tagline">Pr√™t √† en d√©coudre</div>
            <div class="profile-rank" id="profile-rank"></div>
          </div>
          <div class="profile-edit-hint">‚úèÔ∏è</div>
        </div>

        <div class="profile-summary" id="profile-summary">
          <div class="profile-stat">
            <span class="profile-stat-value" id="prof-sessions">0</span>
            <span class="profile-stat-label">S√©ances</span>
          </div>
          <div class="profile-stat">
            <span class="profile-stat-value" id="prof-volume">0t</span>
            <span class="profile-stat-label">Soulev√©</span>
          </div>
          <div class="profile-stat">
            <span class="profile-stat-value" id="prof-streak">0</span>
            <span class="profile-stat-label">Streak (sem.)</span>
          </div>
          <div class="profile-stat">
            <span class="profile-stat-value" id="prof-prs">0</span>
            <span class="profile-stat-label">Records</span>
          </div>
        </div>

        <!-- Achievements (aper√ßu compact) -->
        <div class="settings-group">
          <div class="profile-section-header">
            <h3>üéñÔ∏è Succ√®s</h3>
            <span class="profile-badge-count" id="achievements-count">0/18</span>
          </div>
          <div id="profile-achievements-preview" class="profile-achievements-preview"></div>
          <button class="btn profile-see-all-btn" onclick="AppUI.openAllAchievements()">Voir tous les succ√®s</button>
        </div>

        <!-- √âvolution 12 mois -->
        <div class="settings-group">
          <h3>üìà √âvolution</h3>
          <div id="profile-evolution" class="profile-evolution"></div>
        </div>

        <!-- Param√®tres & Donn√©es -->
        <div class="settings-group">
          <h3>üìÅ Donn√©es</h3>
          <button class="btn" onclick="AppUI.exportData()">Exporter donn√©es</button>
          <button class="btn" onclick="AppUI.importData()">Importer donn√©es</button>
        </div>
        <div class="settings-group">
          <h3>üß™ D√©veloppement</h3>
          <button class="btn" onclick="AppUI.generateTestData()">G√©n√©rer donn√©es de test</button>
        </div>
        <div class="settings-group">
          <h3>‚ö†Ô∏è Zone Danger</h3>
          <button class="btn btn-danger" onclick="AppUI.resetData()">R√©initialiser toutes les donn√©es</button>
        </div>
        <div class="app-footer">
          <p>Made with ‚ù§Ô∏è by Abdullah Cammur</p>
          <p class="app-version" id="app-version"></p>
        </div>
      </div>

      <!-- ========== Bottom Navigation ========== -->
      <div class="navbar">
        <div class="nav-item active" onclick="AppUI.switchPage(event, 'dashboard')">
          <div class="nav-item-icon">&#127968;</div>
          <div class="nav-item-label">Dashboard</div>
        </div>
        <div class="nav-item" onclick="AppUI.switchPage(event, 'stats')">
          <div class="nav-item-icon">&#128200;</div>
          <div class="nav-item-label">Stats</div>
        </div>
        <div class="nav-fab">
          <button onclick="AppUI.openStartSession()">+</button>
        </div>
        <div class="nav-item" onclick="AppUI.switchPage(event, 'seance')">
          <div class="nav-item-icon">&#128170;</div>
          <div class="nav-item-label">S√©ances</div>
        </div>
        <div class="nav-item" onclick="AppUI.switchPage(event, 'profil')">
          <div class="nav-item-icon">&#128100;</div>
          <div class="nav-item-label">Profil</div>
        </div>
      </div>
    </div>

    <!-- ========== OVERLAY: Creer un programme ========== -->
    <div id="overlay-create-program" class="overlay">
      <div class="overlay-header">
        <h2 id="create-program-title">Nouveau Programme</h2>
        <button class="overlay-close" onclick="AppUI.closeOverlay('overlay-create-program')">&#10005;</button>
      </div>
      <div class="overlay-content">
        <div class="form-group">
          <label class="form-label">Nom du programme</label>
          <input type="text" class="form-input" id="program-name" placeholder="Ex: Push, Pull, Leg Day...">
        </div>
        <div id="program-exercises"></div>
        <button class="add-link" onclick="AppUI.addExerciseToForm()">+ Ajouter un exercice</button>
        <div style="margin-top: 30px;">
          <button class="btn btn-white" onclick="AppUI.saveProgram()">Sauvegarder</button>
          <button class="btn" id="btn-duplicate-program" style="display:none; background: var(--color-primary); color:#fff; margin-top:10px;" onclick="AppUI.duplicateCurrentProgram()">Dupliquer</button>
          <button class="btn btn-danger" id="btn-delete-program" style="display:none;" onclick="AppUI.deleteCurrentProgram()">Supprimer ce programme</button>
          <button class="btn btn-danger" id="btn-delete-program-sessions" style="display:none; opacity:0.7; font-size:0.85rem;" onclick="AppUI.deleteCurrentProgramWithSessions()">Supprimer avec ses s√©ances</button>
        </div>
      </div>
    </div>

    <!-- ========== OVERLAY: Selectionner programme (bouton +) ========== -->
    <div id="overlay-select-program" class="overlay">
      <div class="overlay-header">
        <h2>Demarrer une seance</h2>
        <button class="overlay-close" onclick="AppUI.closeOverlay('overlay-select-program')">&#10005;</button>
      </div>
      <div class="overlay-content">
        <p class="text-muted mb-20">Choisis un programme pour commencer ta seance</p>
        <div id="program-select-list" class="program-grid"></div>
      </div>
    </div>

    <!-- ========== OVERLAY: Session active ========== -->
    <div id="overlay-active-session" class="overlay">
      <div class="overlay-header">
        <h2 id="active-session-title">Seance en cours</h2>
        <button class="overlay-close" onclick="AppUI.confirmCloseSession()">&#10005;</button>
      </div>
      <div class="overlay-content">
        <div class="session-timer" id="session-timer">
          <div class="session-timer-value" id="session-timer-value">00:00</div>
          <div class="session-timer-label">Dur√©e</div>
        </div>
        <div id="active-session-exercises"></div>
        <div style="margin-top: 30px;">
          <button class="btn btn-white" onclick="AppUI.saveSession()">Terminer la seance</button>
        </div>
      </div>
    </div>

    <!-- ========== OVERLAY: Detail d'une seance ========== -->
    <div id="overlay-session-detail" class="overlay">
      <div class="overlay-header">
        <h2 id="session-detail-title">Detail Seance</h2>
        <button class="overlay-close" onclick="AppUI.closeOverlay('overlay-session-detail')">&#10005;</button>
      </div>
      <div class="overlay-content">
        <div id="session-detail-content"></div>
        <div style="margin-top: 30px;">
          <button class="btn btn-danger" onclick="AppUI.deleteCurrentSession()">Supprimer cette seance</button>
        </div>
      </div>
    </div>

    <!-- ========== OVERLAY: Tous les achievements ========== -->
    <div id="overlay-all-achievements" class="overlay">
      <div class="overlay-header">
        <h2>üéñÔ∏è Tous les Succ√®s</h2>
        <button class="overlay-close" onclick="AppUI.closeOverlay('overlay-all-achievements')">‚úï</button>
      </div>
      <div class="overlay-content">
        <div class="achievements-progress-bar">
          <div class="achievements-progress-fill" id="achievements-progress-fill"></div>
        </div>
        <p class="achievements-progress-text" id="achievements-progress-text">0/18 d√©bloqu√©s</p>
        <div id="all-achievements-list" class="all-achievements-list"></div>
      </div>
    </div>

    <!-- ========== OVERLAY: Modifier le profil ========== -->
    <div id="overlay-edit-profile" class="overlay">
      <div class="overlay-header">
        <h2>Modifier le Profil</h2>
        <button class="overlay-close" onclick="AppUI.closeOverlay('overlay-edit-profile')">‚úï</button>
      </div>
      <div class="overlay-content">
        <div class="edit-profile-emoji-section">
          <div class="edit-profile-emoji-preview" id="edit-profile-emoji-preview">üèãÔ∏è</div>
          <div class="edit-profile-emoji-grid" id="edit-profile-emoji-grid"></div>
        </div>
        <div class="form-group">
          <label class="form-label">Nom</label>
          <input type="text" id="edit-profile-name" class="form-input" placeholder="Ton nom" maxlength="30">
        </div>
        <div class="form-group">
          <label class="form-label">Bio</label>
          <input type="text" id="edit-profile-bio" class="form-input" placeholder="D√©cris ton objectif" maxlength="60">
        </div>
        <button class="btn btn-white" onclick="AppUI.saveProfile()">Enregistrer</button>
      </div>
    </div>

    <!-- ========== OVERLAY: Graphique exercice ========== -->
    <div id="overlay-exercise-chart" class="overlay">
      <div class="overlay-header">
        <h2 id="chart-exercise-title">√âvolution</h2>
        <button class="overlay-close" onclick="AppUI.closeOverlay('overlay-exercise-chart')">‚úï</button>
      </div>
      <div class="overlay-content">
        <!-- S√©lecteur de p√©riode -->
        <div class="chart-controls">
          <div class="period-selector">
            <button class="period-btn" data-period="7d" onclick="AppUI.switchChartPeriod(event, '7d')">7j</button>
            <button class="period-btn active" data-period="30d" onclick="AppUI.switchChartPeriod(event, '30d')">30j</button>
            <button class="period-btn" data-period="3m" onclick="AppUI.switchChartPeriod(event, '3m')">3M</button>
            <button class="period-btn" data-period="6m" onclick="AppUI.switchChartPeriod(event, '6m')">6M</button>
            <button class="period-btn" data-period="1y" onclick="AppUI.switchChartPeriod(event, '1y')">1A</button>
          </div>
        </div>
        
        <!-- Chart Canvas -->
        <div class="chart-container">
          <canvas id="exercise-chart" width="560" height="300"></canvas>
        </div>
        
        <!-- Stats du graphique -->
        <div class="chart-stats">
          <div class="chart-stat">
            <span class="chart-stat-label">Progression</span>
            <span class="chart-stat-value" id="chart-progression">+0%</span>
          </div>
          <div class="chart-stat">
            <span class="chart-stat-label">Meilleure session</span>
            <span class="chart-stat-value" id="chart-best-session">-</span>
          </div>
          <div class="chart-stat">
            <span class="chart-stat-label">Derni√®re session</span>
            <span class="chart-stat-value" id="chart-last-session">-</span>
          </div>
        </div>
      </div>
    </div>

    <!-- Toast notification -->
    <div class="toast" id="app-toast"></div>

    <!-- Chart tooltip -->
    <div class="chart-tooltip" id="chart-tooltip" style="display:none"></div>

    <script src="app.js"></script>
  </body>
</html>
